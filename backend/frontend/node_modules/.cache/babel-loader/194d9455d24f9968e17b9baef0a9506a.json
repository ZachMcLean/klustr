{"ast":null,"code":"import _objectSpread from\"/home/zach/code/test/klustr/backend/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/zach/code/test/klustr/backend/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/zach/code/test/klustr/backend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/zach/code/test/klustr/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useParams}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/chevron-left.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(_ref){var match=_ref.match,history=_ref.history;var noteId=match.params.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref2.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/update/\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function updateNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/delete/\"),{method:'DELETE','headers':{'Content-Type':'application/json'}});history.push('/');case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/create/\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function createNote(){return _ref5.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!='new'&&!note.body){deleteNote();}else if(noteId!='new'){updateNote();}else if(noteId==='new'&&note!=null){createNote();}history.push('/');};var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{'body':value});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","ReactComponent","ArrowLeft","NotePage","match","history","noteId","params","id","note","setNote","getNote","fetch","response","json","data","updateNote","method","headers","body","JSON","stringify","deleteNote","push","createNote","handleSubmit","handleChange","value","e","target"],"sources":["/home/zach/code/test/klustr/backend/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { Link, useParams } from 'react-router-dom'\nimport { ReactComponent as ArrowLeft } from '../assets/chevron-left.svg'\n\nconst NotePage = ({ match, history }) => {\n\n  let noteId = match.params.id\n  let [note, setNote] = useState(null)\n\n\n  useEffect(() => {\n    getNote()\n  }, [noteId])\n\n  let getNote = async () => {\n    if (noteId === 'new') return\n\n    let response = await fetch(`/api/notes/${noteId}/`)\n    let data = await response.json()\n    setNote(data)\n  }\n\n  let updateNote = async () => {\n    fetch(`/api/notes/${noteId}/update/`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(note)\n    })\n  }\n\n  let deleteNote = async () => {\n    fetch(`/api/notes/${noteId}/delete/`, {\n      method: 'DELETE', \n      'headers' : {\n        'Content-Type': 'application/json'\n      },\n    })\n    history.push('/')\n  }\n\n  let createNote = async () => {\n    fetch(`/api/notes/create/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(note)\n    })\n  }\n  \n  let handleSubmit = () => {\n    if (noteId != 'new' && !note.body) {\n      deleteNote()\n    } else if(noteId != 'new') {\n      updateNote()\n    } else if(noteId === 'new' && note != null) {\n      createNote()\n    }\n    history.push('/')\n  }\n\n  let handleChange = (value) => {\n    setNote(note => ({...note, 'body': value})) \n  }\n\n  return (\n    <div className='note'>\n      <div className='note-header'>\n        <h3>\n            <ArrowLeft onClick={handleSubmit}/>\n        </h3>\n        {noteId != 'new' ? (\n          <button onClick={deleteNote}>Delete</button>\n        ) : (\n          <button onClick={handleSubmit}>Done</button>\n        )}\n      </div>\n      <textarea onChange={(e) => {handleChange(e.target.value)}} value={note?.body}></textarea>\n    </div>\n  )\n}\n\nexport default NotePage\n"],"mappings":"uhBAAA,MAAOA,MAAK,EAAGC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAChD,OAASC,IAAI,CAAEC,SAAS,KAAQ,kBAAkB,CAClD,OAASC,cAAc,GAAIC,UAAS,KAAQ,4BAA4B,yFAExE,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,MAA2B,IAArBC,MAAK,MAALA,KAAK,CAAEC,OAAO,MAAPA,OAAO,CAEhC,GAAIC,OAAM,CAAGF,KAAK,CAACG,MAAM,CAACC,EAAE,CAC5B,cAAsBX,QAAQ,CAAC,IAAI,CAAC,wCAA/BY,IAAI,eAAEC,OAAO,eAGlBZ,SAAS,CAAC,UAAM,CACda,OAAO,EAAE,CACX,CAAC,CAAE,CAACL,MAAM,CAAC,CAAC,CAEZ,GAAIK,QAAO,6FAAG,4JACRL,MAAM,GAAK,KAAK,wFAECM,MAAK,sBAAeN,MAAM,MAAI,QAA/CO,QAAQ,qCACKA,SAAQ,CAACC,IAAI,EAAE,QAA5BC,IAAI,eACRL,OAAO,CAACK,IAAI,CAAC,uDACd,kBANGJ,QAAO,2CAMV,CAED,GAAIK,WAAU,6FAAG,0IACfJ,KAAK,sBAAeN,MAAM,aAAY,CACpCW,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACZ,IAAI,CAC3B,CAAC,CAAC,yDACH,kBARGO,WAAU,2CAQb,CAED,GAAIM,WAAU,6FAAG,0IACfV,KAAK,sBAAeN,MAAM,aAAY,CACpCW,MAAM,CAAE,QAAQ,CAChB,SAAS,CAAG,CACV,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACFZ,OAAO,CAACkB,IAAI,CAAC,GAAG,CAAC,yDAClB,kBARGD,WAAU,2CAQb,CAED,GAAIE,WAAU,6FAAG,0IACfZ,KAAK,sBAAuB,CAC1BK,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACZ,IAAI,CAC3B,CAAC,CAAC,yDACH,kBARGe,WAAU,2CAQb,CAED,GAAIC,aAAY,CAAG,QAAfA,aAAY,EAAS,CACvB,GAAInB,MAAM,EAAI,KAAK,EAAI,CAACG,IAAI,CAACU,IAAI,CAAE,CACjCG,UAAU,EAAE,CACd,CAAC,IAAM,IAAGhB,MAAM,EAAI,KAAK,CAAE,CACzBU,UAAU,EAAE,CACd,CAAC,IAAM,IAAGV,MAAM,GAAK,KAAK,EAAIG,IAAI,EAAI,IAAI,CAAE,CAC1Ce,UAAU,EAAE,CACd,CACAnB,OAAO,CAACkB,IAAI,CAAC,GAAG,CAAC,CACnB,CAAC,CAED,GAAIG,aAAY,CAAG,QAAfA,aAAY,CAAIC,KAAK,CAAK,CAC5BjB,OAAO,CAAC,SAAAD,IAAI,wCAASA,IAAI,MAAE,MAAM,CAAEkB,KAAK,IAAE,CAAC,CAC7C,CAAC,CAED,mBACE,aAAK,SAAS,CAAC,MAAM,wBACnB,aAAK,SAAS,CAAC,aAAa,wBAC1B,iCACI,KAAC,SAAS,EAAC,OAAO,CAAEF,YAAa,EAAE,EAClC,CACJnB,MAAM,EAAI,KAAK,cACd,eAAQ,OAAO,CAAEgB,UAAW,oBAAgB,cAE5C,eAAQ,OAAO,CAAEG,YAAa,kBAC/B,GACG,cACN,iBAAU,QAAQ,CAAE,kBAACG,CAAC,CAAK,CAACF,YAAY,CAACE,CAAC,CAACC,MAAM,CAACF,KAAK,CAAC,EAAE,CAAC,KAAK,CAAElB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEU,IAAK,EAAY,GACrF,CAEV,CAAC,CAED,cAAehB,SAAQ"},"metadata":{},"sourceType":"module"}